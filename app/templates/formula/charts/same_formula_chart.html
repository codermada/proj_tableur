{% extends "base.html" %}
{% block content %}




<figure class="highcharts-figure">
    
    <div id="container"></div>
    <div id="sliders">
        <table>
            <tr>
                <td><label for="alpha">Alpha Angle</label></td>
                <td><input id="alpha" type="range" min="0" max="45" value="0"/> <span id="alpha-value" class="value"></span></td>
            </tr>
            <tr>
                <td><label for="beta">Beta Angle</label></td>
                <td><input id="beta" type="range" min="-45" max="45" value="0"/> <span id="beta-value" class="value"></span></td>
            </tr>
            <tr>
                <td><label for="depth">Depth</label></td>
                <td><input id="depth" type="range" min="20" max="100" value="100"/> <span id="depth-value" class="value"></span></td>
            </tr>
        </table>
    </div>
</figure>
<script src="{{url_for('static', filename='code/highcharts.js')}}"></script>
<script src="{{url_for('static', filename='code/highcharts-3d.js')}}"></script>
<script src="{{url_for('static', filename='code/modules/exporting.js')}}"></script>
<script src="{{url_for('static', filename='code/modules/export-data.js')}}"></script>
<script src="{{url_for('static', filename='code/modules/accessibility.js')}}"></script>

		<script type="text/javascript">
// Set up the chart
const chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'column',
        options3d: {
            enabled: true,
            alpha: 0,
            beta: 0,
            depth: 100,
            viewDistance: 25
        }
    },
    xAxis: {
        categories: [{%for category in categories%}'{{category}}',
    {%endfor%}]
    },
    yAxis: {
        title: {
            enabled: false
        }
    },
    tooltip: {
        headerFormat: '<b>{point.key}</b><br>',
        pointFormat: '{point.y}'
    },
    title: {
        text: '{{formula_name}}',
        align: 'left'
    },
    subtitle: {
        text: '',
        align: 'left'
    },
    legend: {
        enabled: false
    },
    plotOptions: {
        column: {
            depth: 25
        }
    },
    series: [{
        data: {{values}},
        colorByPoint: true
    }]
});

function showValues() {
    document.getElementById('alpha-value').innerHTML = chart.options.chart.options3d.alpha;
    document.getElementById('beta-value').innerHTML = chart.options.chart.options3d.beta;
    document.getElementById('depth-value').innerHTML = chart.options.chart.options3d.depth;
}

// Activate the sliders
document.querySelectorAll('#sliders input').forEach(input => input.addEventListener('input', e => {
    chart.options.chart.options3d[e.target.id] = parseFloat(e.target.value);
    showValues();
    chart.redraw(false);
}));

showValues();
		</script>
{% endblock content %}
